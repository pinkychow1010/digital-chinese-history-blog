<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="twitter:card" content="summary" /><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Combining Web Scraping with Keyword Extraction | æ•¸ä½ä¸­åœ‹å²éƒ¨è½æ ¼ Digital Chinese History</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="Combining Web Scraping with Keyword Extraction" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Chinese Keyword Extraction using Jieba (II)" />
<meta property="og:description" content="Chinese Keyword Extraction using Jieba (II)" />
<link rel="canonical" href="https://pinkychow1010.github.io/digital-chinese-history-blog/level-4/chapter-4/jieba/beautifulsoup/web-scraping/2022/02/07/Chinese_Keyword_Extraction_2.html" />
<meta property="og:url" content="https://pinkychow1010.github.io/digital-chinese-history-blog/level-4/chapter-4/jieba/beautifulsoup/web-scraping/2022/02/07/Chinese_Keyword_Extraction_2.html" />
<meta property="og:site_name" content="æ•¸ä½ä¸­åœ‹å²éƒ¨è½æ ¼ Digital Chinese History" />
<meta property="og:image" content="https://pinkychow1010.github.io/digital-chinese-history-blog/images/tunnel.jpg" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2022-02-07T00:00:00-06:00" />
<meta name="twitter:card" content="summary_large_image" />
<meta property="twitter:image" content="https://pinkychow1010.github.io/digital-chinese-history-blog/images/tunnel.jpg" />
<meta property="twitter:title" content="Combining Web Scraping with Keyword Extraction" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-02-07T00:00:00-06:00","datePublished":"2022-02-07T00:00:00-06:00","description":"Chinese Keyword Extraction using Jieba (II)","headline":"Combining Web Scraping with Keyword Extraction","image":"https://pinkychow1010.github.io/digital-chinese-history-blog/images/tunnel.jpg","mainEntityOfPage":{"@type":"WebPage","@id":"https://pinkychow1010.github.io/digital-chinese-history-blog/level-4/chapter-4/jieba/beautifulsoup/web-scraping/2022/02/07/Chinese_Keyword_Extraction_2.html"},"url":"https://pinkychow1010.github.io/digital-chinese-history-blog/level-4/chapter-4/jieba/beautifulsoup/web-scraping/2022/02/07/Chinese_Keyword_Extraction_2.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/digital-chinese-history-blog/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="https://pinkychow1010.github.io/digital-chinese-history-blog/feed.xml" title="æ•¸ä½ä¸­åœ‹å²éƒ¨è½æ ¼
Digital Chinese History
" /><link rel="shortcut icon" type="image/x-icon" href="/digital-chinese-history-blog/images/favicon.ico"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Primer/15.2.0/primer.css" integrity="sha512-xTz2ys4coGAOz8vuV1NcQBkgVmKhsSEtjbqyMJbBHRplFuvKIUo6xhLHpAyPt9mfR6twHJgn9OgVLuqOvjeBhg==" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog==" crossorigin="anonymous" />

<script>
function wrap_img(fn) {
    if (document.attachEvent ? document.readyState === "complete" : document.readyState !== "loading") {
        var elements = document.querySelectorAll(".post img");
        Array.prototype.forEach.call(elements, function(el, i) {
            if (el.getAttribute("title") && (el.className != "emoji")) {
                const caption = document.createElement('figcaption');
                var node = document.createTextNode(el.getAttribute("title"));
                caption.appendChild(node);
                const wrapper = document.createElement('figure');
                wrapper.className = 'image';
                el.parentNode.insertBefore(wrapper, el);
                el.parentNode.removeChild(el);
                wrapper.appendChild(el);
                wrapper.appendChild(caption);
            }
        });
    } else { document.addEventListener('DOMContentLoaded', fn); }
}
window.onload = wrap_img;
</script>

<script>
    document.addEventListener("DOMContentLoaded", function(){
    // add link icon to anchor tags
    var elem = document.querySelectorAll(".anchor-link")
    elem.forEach(e => (e.innerHTML = '<i class="fas fa-link fa-xs"></i>'));
    });
</script>
</head>
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/digital-chinese-history-blog/">æ•¸ä½ä¸­åœ‹å²éƒ¨è½æ ¼
Digital Chinese History
</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/digital-chinese-history-blog/about/">About</a><a class="page-link" href="/digital-chinese-history-blog/gallery/">Gallery</a><a class="page-link" href="/digital-chinese-history-blog/resources/">Resources</a><a class="page-link" href="/digital-chinese-history-blog/search/">Search</a><a class="page-link" href="/digital-chinese-history-blog/categories/">Tags</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Combining Web Scraping with Keyword Extraction</h1><p class="page-description">Chinese Keyword Extraction using Jieba (II)</p><p class="post-meta post-meta-title"><time class="dt-published" datetime="2022-02-07T00:00:00-06:00" itemprop="datePublished">
        Feb 7, 2022
      </time>
       â€¢ <span class="read-time" title="Estimated read time">
    
    
      11 min read
    
</span></p>

    
      <p class="category-tags"><i class="fas fa-tags category-tags-icon"></i></i> 
      
        <a class="category-tags-link" href="/digital-chinese-history-blog/categories/#level-4">level-4</a>
        &nbsp;
      
        <a class="category-tags-link" href="/digital-chinese-history-blog/categories/#chapter-4">chapter-4</a>
        &nbsp;
      
        <a class="category-tags-link" href="/digital-chinese-history-blog/categories/#jieba">jieba</a>
        &nbsp;
      
        <a class="category-tags-link" href="/digital-chinese-history-blog/categories/#BeautifulSoup">BeautifulSoup</a>
        &nbsp;
      
        <a class="category-tags-link" href="/digital-chinese-history-blog/categories/#web-scraping">web-scraping</a>
        
      
      </p>
    

    
      
        <div class="pb-5 d-flex flex-justify-center">
          <div class="px-2">

    <a href="https://github.com/pinkychow1010/digital-chinese-history-blog/tree/master/_notebooks/2022-02-07-Chinese_Keyword_Extraction_2.ipynb" role="button" target="_blank">
<img class="notebook-badge-image" src="/digital-chinese-history-blog/assets/badges/github.svg" alt="View On GitHub">
    </a>
</div>

          <div class="px-2">
    <a href="https://mybinder.org/v2/gh/pinkychow1010/digital-chinese-history-blog/master?filepath=_notebooks%2F2022-02-07-Chinese_Keyword_Extraction_2.ipynb" target="_blank">
        <img class="notebook-badge-image" src="/digital-chinese-history-blog/assets/badges/binder.svg" alt="Open In Binder"/>
    </a>
</div>

          <div class="px-2">
    <a href="https://colab.research.google.com/github/pinkychow1010/digital-chinese-history-blog/blob/master/_notebooks/2022-02-07-Chinese_Keyword_Extraction_2.ipynb" target="_blank">
        <img class="notebook-badge-image" src="/digital-chinese-history-blog/assets/badges/colab.svg" alt="Open In Colab"/>
    </a>
</div>
          <div class="px-2">
  <a href="https://deepnote.com/launch?url=https%3A%2F%2Fgithub.com%2Fpinkychow1010%2Fdigital-chinese-history-blog%2Fblob%2Fmaster%2F_notebooks%2F2022-02-07-Chinese_Keyword_Extraction_2.ipynb" target="_blank">
      <img class="notebook-badge-image" src="/digital-chinese-history-blog/assets/badges/deepnote.svg" alt="Launch in Deepnote"/>
  </a>
</div>

        </div>
      </header>

  <div class="post-content e-content" itemprop="articleBody">
    <ul id="toc" class="section-nav">
<li class="toc-entry toc-h1"><a href="#Set-Up-Environment-ğŸŒ²">Set Up Environment ğŸŒ² </a>
<ul>
<li class="toc-entry toc-h3"><a href="#Python-Library">Python Library </a></li>
<li class="toc-entry toc-h3"><a href="#Google-Drive">Google Drive </a></li>
<li class="toc-entry toc-h3"><a href="#Download-Resources-using-wget">Download Resources using wget </a></li>
<li class="toc-entry toc-h2"><a href="#Web-Scraping-Basics-ğŸŒ±">Web Scraping Basics ğŸŒ± </a>
<ul>
<li class="toc-entry toc-h3"><a href="#Step-1:-Get-the-HTML-without-parsing.">Step 1: Get the HTML without parsing. </a></li>
<li class="toc-entry toc-h3"><a href="#Step-2:-Parse-the-HTML.">Step 2: Parse the HTML. </a></li>
<li class="toc-entry toc-h3"><a href="#Step-3:-Get-the-text-with-tags-removal-and-without-class-selection">Step 3: Get the text with tags removal and without class selection </a></li>
<li class="toc-entry toc-h3"><a href="#Step-4:-Get-the-text-with-tags-removal-and-class-selection">Step 4: Get the text with tags removal and class selection </a></li>
<li class="toc-entry toc-h3"><a href="#Step-5:-Keyword-Extraction">Step 5: Keyword Extraction </a>
<ul>
<li class="toc-entry toc-h4"><a href="#Keywords:">Keywords: </a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toc-entry toc-h1"><a href="#Writing-a-Function">Writing a Function </a>
<ul>
<li class="toc-entry toc-h2"><a href="#Try-it-out-yourself-ğŸ§">Try it out yourself ğŸ§ </a></li>
</ul>
</li>
<li class="toc-entry toc-h1"><a href="#ğŸ¤”-Put-a-URL-here-â¬‡ï¸">ğŸ¤” Put a URL here â¬‡ï¸ </a>
<ul>
<li class="toc-entry toc-h2"><a href="#Extract-Keywords-from-Multiple-Blogs">Extract Keywords from Multiple Blogs </a></li>
<li class="toc-entry toc-h2"><a href="#Export-Keyword-List">Export Keyword List </a></li>
</ul>
</li>
<li class="toc-entry toc-h1"><a href="#ğŸ‰">ğŸ‰ </a>
<ul>
<li class="toc-entry toc-h2"><a href="#Additional-information">Additional information </a></li>
</ul>
</li>
</ul><!--
#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: _notebooks/2022-02-07-Chinese_Keyword_Extraction_2.ipynb
-->

<div class="container" id="notebook-container">
        
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Keyword extraction is one of the very popular techniques in Natural Language Processing (NLP) and text analysis. <a href="https://pinkychow1010.github.io/digital-chinese-history-blog/level-4/chapter-4/jieba/text-mining/2022/02/05/Chinese_Keyword_Extraction_1.html">Last time</a> we learnt about how to extract keywords from Chinese text using <strong>Jieba</strong>, this time we will learn how to extract keywords directly from the web using <strong>web scraping technique</strong>. It can be achieved using <strong>BeautifulSoup</strong>, a Python library for pulling data out of HTML and XML files. What is web scraping? Web scraping is an automated process used to download the page (fetching) and copy data from the web. Examples include copying a table or book titles from a website.</p>
<p>In this lesson, we will download the Chinese blog <strong>æ—¶å·®æ’­å®¢ï¸±å®—æ•™å­¦ï¼šä¿¡ä»°ï¼Œé­”æ³•ï¼Œèº«ä»½ï¼ŒæƒåŠ›</strong> from <strong>æ¾æ¹ƒæ–°é—»</strong> and extract keywords from the content. You will also learn how to do it with any website you want.</p>
<blockquote>
<p><strong>IMPORTANT</strong>:&gt;&gt; As mentioned in the <a href="https://pinkychow1010.github.io/digital-chinese-history-blog/about/">instructions</a>, you can click on the icon <strong>"open in Colab"</strong> to open the script in a <strong>Jupyter notebook</strong> to run the code. It is highly recommended to follow the tutorials in the correct order.</p>
<h1 id="Set-Up-Environment-ğŸŒ²">
<a class="anchor" href="#Set-Up-Environment-%F0%9F%8C%B2" aria-hidden="true"><span class="octicon octicon-link"></span></a>Set Up Environment ğŸŒ²<a class="anchor-link" href="#Set-Up-Environment-%F0%9F%8C%B2"> </a>
</h1>
</blockquote>
<p>First, we have to set up our cloud environment in <strong><a href="https://pinkychow1010.github.io/digital-chinese-history-blog/level-1/chapter-1/jupyter/colab/2020/01/30/JupyterNotebook_Colab_Basics.html">Colab</a></strong>.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Python-Library">
<a class="anchor" href="#Python-Library" aria-hidden="true"><span class="octicon octicon-link"></span></a>Python Library<a class="anchor-link" href="#Python-Library"> </a>
</h3>
<ul>
<li>Download Library</li>
</ul>
<p>We need to download <strong>Jieba</strong> using <strong>pip</strong>.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-python"><pre><span></span><span class="err">!</span> <span class="n">pip</span> <span class="n">install</span> <span class="n">jieba</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Requirement already satisfied: jieba in /usr/local/lib/python3.7/dist-packages (0.42.1)
</pre>
</div>
</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>Import Libraries</li>
</ul>
<p>We will then import <strong>Jieba</strong>, <strong>BeautifulSoup</strong> and other libraries we need. ğŸ“š</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-python"><pre><span></span><span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">unicode_literals</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"../"</span><span class="p">)</span>

<span class="c1"># Jieba for tokenization and keyword extraction</span>
<span class="kn">import</span> <span class="nn">jieba</span>
<span class="kn">import</span> <span class="nn">jieba.posseg</span>
<span class="kn">import</span> <span class="nn">jieba.analyse</span>

<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">skimage</span> <span class="kn">import</span> <span class="n">filters</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="c1"># Open URL</span>
<span class="kn">from</span> <span class="nn">urllib.request</span> <span class="kn">import</span> <span class="n">urlopen</span><span class="p">,</span> <span class="n">Request</span>
<span class="kn">import</span> <span class="nn">ssl</span>

<span class="c1"># Web scarping</span>
<span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Google-Drive">
<a class="anchor" href="#Google-Drive" aria-hidden="true"><span class="octicon octicon-link"></span></a>Google Drive<a class="anchor-link" href="#Google-Drive"> </a>
</h3>
<ul>
<li>Connect to Google Drive</li>
</ul>
<p>To access resources in your own Google Drive, we need to permit it by running the following code.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-python"><pre><span></span><span class="kn">from</span> <span class="nn">google.colab</span> <span class="kn">import</span> <span class="n">drive</span>
<span class="n">drive</span><span class="o">.</span><span class="n">mount</span><span class="p">(</span><span class="s1">'/content/drive/'</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Mounted at /content/drive/
</pre>
</div>
</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Download-Resources-using-wget">
<a class="anchor" href="#Download-Resources-using-wget" aria-hidden="true"><span class="octicon octicon-link"></span></a>Download Resources using wget<a class="anchor-link" href="#Download-Resources-using-wget"> </a>
</h3>
<p>In this lesson, there are two materials we need to download from the web. The first one is the Chinese font which we need to display characters in the plot. The second one is a list of Chinese stopwords which we need for tokenization. We can access both of them using <strong>wget</strong>.</p>
<ul>
<li>Download Chinese Font</li>
</ul>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-python"><pre><span></span><span class="err">!</span><span class="n">wget</span> <span class="o">-</span><span class="n">O</span> <span class="n">TaipeiSansTCBeta</span><span class="o">-</span><span class="n">Regular</span><span class="o">.</span><span class="n">ttf</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">drive</span><span class="o">.</span><span class="n">google</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">uc</span><span class="err">?</span><span class="nb">id</span><span class="o">=</span><span class="mi">1</span><span class="n">eGAsTN1HBpJAkeVM57_C7ccp7hbgSz3_</span><span class="o">&amp;</span><span class="n">export</span><span class="o">=</span><span class="n">download</span>

<span class="c1"># after download, we have to add the font into the plotting library</span>
<span class="c1"># we need matplotlib.font_manager for that</span>
<span class="kn">import</span> <span class="nn">matplotlib</span> <span class="k">as</span> <span class="nn">mpl</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">matplotlib.font_manager</span> <span class="kn">import</span> <span class="n">fontManager</span>

<span class="n">fontManager</span><span class="o">.</span><span class="n">addfont</span><span class="p">(</span><span class="s1">'TaipeiSansTCBeta-Regular.ttf'</span><span class="p">)</span>
<span class="n">mpl</span><span class="o">.</span><span class="n">rc</span><span class="p">(</span><span class="s1">'font'</span><span class="p">,</span> <span class="n">family</span><span class="o">=</span><span class="s1">'Taipei Sans TC Beta'</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>Download Chinese Stopword List</li>
</ul>
<p>From the github link, we can access the list of stopwords.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-python"><pre><span></span><span class="err">!</span> <span class="n">wget</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">stopwords</span><span class="o">-</span><span class="n">iso</span><span class="o">/</span><span class="n">stopwords</span><span class="o">-</span><span class="n">zh</span><span class="o">/</span><span class="n">blob</span><span class="o">/</span><span class="n">master</span><span class="o">/</span><span class="n">stopwords</span><span class="o">-</span><span class="n">zh</span><span class="o">.</span><span class="n">txt</span> <span class="o">-</span><span class="n">P</span> <span class="o">/</span><span class="n">content</span><span class="o">/</span><span class="n">drive</span><span class="o">/</span><span class="n">MyDrive</span><span class="o">/</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Web-Scraping-Basics-ğŸŒ±">
<a class="anchor" href="#Web-Scraping-Basics-%F0%9F%8C%B1" aria-hidden="true"><span class="octicon octicon-link"></span></a>Web Scraping Basics ğŸŒ±<a class="anchor-link" href="#Web-Scraping-Basics-%F0%9F%8C%B1"> </a>
</h2>
<p>We have learnt how to extract keywords from strings. What if this time, we do not want to copy the whole text, but directly get the text from the web? It can be done by directly scrapping the text from URLs using <strong>BeautifulSoup</strong> ğŸ¥£.</p>
<p>The function BeautifulSoup from the library can parse the HTML code to Python objects. <strong>Data parsing</strong> is a process in which a string of data is converted from one format to another. To start with, we need to pass the web address to variable <code>url</code>, then open <code>url</code> using <strong>urllib.request</strong> and convert the code with <code>"html.parser"</code>. We will get the <code>soup</code> at the end.</p>
<p>In order to extract only text for our analysis, we will remove the HTML tags using <strong>extract()</strong>, following by <strong>get_text()</strong>. To further exclude irrelevant texts from the headers, we can choose to select only the blog content by specifying the <strong>class</strong> of the content using <strong>find()</strong>. To find out the class, we can go to the webpage, open the <strong>developer tool</strong> and use the <strong>inspector</strong> to click on the blog content. We will then find out, the class we need is called <strong>"newsdetail_content"</strong>.</p>
<p>To guide you through each step of the process, we will first get the text without filtering the data.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Step-1:-Get-the-HTML-without-parsing.">
<a class="anchor" href="#Step-1:-Get-the-HTML-without-parsing." aria-hidden="true"><span class="octicon octicon-link"></span></a><strong>Step 1:</strong> Get the HTML without parsing.<a class="anchor-link" href="#Step-1:-Get-the-HTML-without-parsing."> </a>
</h3>
<p>First, we will solely read the HTML code from the URL. We can see the result includes not only text but also HTML code. All the Chinese characters are also displayed in <strong>UTF-8</strong>.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-python"><pre><span></span><span class="n">url</span> <span class="o">=</span> <span class="s2">"https://m.thepaper.cn/newsDetail_forward_13762466"</span>

<span class="c1"># this line is needed to avoid running into HTTP error 403 (access denial because of security)</span>
<span class="n">req</span> <span class="o">=</span> <span class="n">Request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="p">{</span><span class="s2">"User-Agent"</span><span class="p">:</span> <span class="s2">"Mozilla/5.0"</span><span class="p">})</span>
<span class="n">html</span> <span class="o">=</span> <span class="n">urlopen</span><span class="p">(</span><span class="n">req</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="n">html</span><span class="p">[</span><span class="mi">500</span><span class="p">:</span><span class="mi">1000</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>b'-touch-fullscreen"/&gt;\n&lt;meta name="Keywords" content="\xe6\xbe\x8e\xe6\xb9\x83\xef\xbc\x8cPaper\xef\xbc\x8cThe Paper\xef\xbc\x8c\xe7\x83\xad\xe9\x97\xae\xe7\xad\x94\xef\xbc\x8c\xe6\x96\xb0\xe9\x97\xbb\xe8\xb7\x9f\xe8\xb8\xaa\xef\xbc\x8c\xe6\x94\xbf\xe6\xb2\xbb\xef\xbc\x8c\xe6\x97\xb6\xe6\x94\xbf\xef\xbc\x8c\xe6\x94\xbf\xe7\xbb\x8f\xef\xbc\x8c\xe6\xbe\x8e\xe6\xb9\x83\xe6\x96\xb0\xe9\x97\xbb\xef\xbc\x8c\xe6\x96\xb0\xe9\x97\xbb\xef\xbc\x8c\xe6\x80\x9d\xe6\x83\xb3\xef\xbc\x8c\xe5\x8e\x9f\xe5\x88\x9b\xe6\x96\xb0\xe9\x97\xbb\xef\xbc\x8c\xe7\xaa\x81\xe5\x8f\x91\xe6\x96\xb0\xe9\x97\xbb\xef\xbc\x8c\xe7\x8b\xac\xe5\xae\xb6\xe6\x8a\xa5\xe9\x81\x93\xef\xbc\x8c\xe4\xb8\x8a\xe6\xb5\xb7\xe6\x8a\xa5\xe4\xb8\x9a\xef\xbc\x8c\xe4\xb8\x9c\xe6\x96\xb9\xe6\x97\xa9\xe6\x8a\xa5\xef\xbc\x8c\xe4\xb8\x9c\xe6\x96\xb9\xe6\x8a\xa5\xe4\xb8\x9a\xef\xbc\x8c\xe4\xb8\x8a\xe6\xb5\xb7\xe4\xb8\x9c\xe6\x96\xb9\xe6\x8a\xa5\xe4\xb8\x9a" /&gt;\n&lt;meta name="Description" content="\xe6\xbe\x8e\xe6\xb9\x83\xef\xbc\x8c\xe6\xbe\x8e\xe6\xb9\x83\xe6\x96\xb0\xe9\x97\xbb\xef\xbc\x8c\xe6\xbe\x8e\xe6\xb9\x83\xe6\x96\xb0\xe9\x97\xbb\xe7\xbd\x91\xef\xbc\x8c\xe6\x96\xb0\xe9\x97\xbb\xe4\xb8\x8e\xe6\x80\x9d\xe6\x83\xb3\xef\xbc\x8c\xe6\xbe\x8e\xe6\xb9\x83\xe6\x98\xaf\xe6\xa4\x8d\xe6\xa0\xb9\xe4\xba\x8e\xe4\xb8\xad\xe5\x9b\xbd\xe4\xb8\x8a\xe6\xb5\xb7\xe7\x9a\x84\xe6\x97\xb6\xe6\x94\xbf\xe6\x80\x9d\xe6\x83\xb3\xe7\xb1\xbb\xe4\xba\x92\xe8\x81\x94\xe7\xbd\x91\xe5\xb9\xb3\xe5\x8f\xb0\xef\xbc\x8c\xe4\xbb\xa5\xe6\x9c\x80\xe6\xb4\xbb\xe8\xb7\x83\xe7\x9a\x84\xe5\x8e\x9f\xe5\x88\x9b\xe6\x96\xb0\xe9\x97\xbb\xe4\xb8\x8e\xe6\x9c\x80\xe5\x86\xb7\xe9\x9d\x99\xe7\x9a\x84\xe6\x80\x9d\xe6\x83\xb3\xe5\x88\x86\xe6\x9e\x90\xe4\xb8\xba\xe4\xb8'
</pre>
</div>
</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Step-2:-Parse-the-HTML.">
<a class="anchor" href="#Step-2:-Parse-the-HTML." aria-hidden="true"><span class="octicon octicon-link"></span></a><strong>Step 2:</strong> Parse the HTML.<a class="anchor-link" href="#Step-2:-Parse-the-HTML."> </a>
</h3>
<p>After parsing the HTML, the layout gets easier to read. We begin to recognize the Chinese characters, but still with a lot of code.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-python"><pre><span></span><span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">html</span><span class="p">,</span> <span class="n">features</span><span class="o">=</span><span class="s2">"html.parser"</span><span class="p">)</span>

<span class="nb">type</span><span class="p">(</span><span class="n">soup</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>bs4.BeautifulSoup</pre>
</div>

</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-python"><pre><span></span><span class="n">soup_string</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">soup</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">soup_string</span><span class="p">[:</span><span class="mi">1500</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>&lt;!DOCTYPE html&gt;

&lt;html lang="cn"&gt;
&lt;head&gt;
&lt;meta content="text/html; charset=utf-8" http-equiv="Content-Type"/&gt;
&lt;meta content="zh-CN" http-equiv="content-language"/&gt;
&lt;meta content="initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no,viewport-fit=cover" name="viewport"/&gt;
&lt;meta content="no" name="apple-mobile-web-app-capable"/&gt;
&lt;meta content="black" name="apple-mobile-web-app-status-bar-style"&gt;
&lt;meta content="telephone=no" name="format-detection"/&gt;
&lt;meta content="yes" name="apple-touch-fullscreen"&gt;
&lt;meta content="æ¾æ¹ƒï¼ŒPaperï¼ŒThe Paperï¼Œçƒ­é—®ç­”ï¼Œæ–°é—»è·Ÿè¸ªï¼Œæ”¿æ²»ï¼Œæ—¶æ”¿ï¼Œæ”¿ç»ï¼Œæ¾æ¹ƒæ–°é—»ï¼Œæ–°é—»ï¼Œæ€æƒ³ï¼ŒåŸåˆ›æ–°é—»ï¼Œçªå‘æ–°é—»ï¼Œç‹¬å®¶æŠ¥é“ï¼Œä¸Šæµ·æŠ¥ä¸šï¼Œä¸œæ–¹æ—©æŠ¥ï¼Œä¸œæ–¹æŠ¥ä¸šï¼Œä¸Šæµ·ä¸œæ–¹æŠ¥ä¸š" name="Keywords"/&gt;
&lt;meta content="æ¾æ¹ƒï¼Œæ¾æ¹ƒæ–°é—»ï¼Œæ¾æ¹ƒæ–°é—»ç½‘ï¼Œæ–°é—»ä¸æ€æƒ³ï¼Œæ¾æ¹ƒæ˜¯æ¤æ ¹äºä¸­å›½ä¸Šæµ·çš„æ—¶æ”¿æ€æƒ³ç±»äº’è”ç½‘å¹³å°ï¼Œä»¥æœ€æ´»è·ƒçš„åŸåˆ›æ–°é—»ä¸æœ€å†·é™çš„æ€æƒ³åˆ†æä¸ºä¸¤ç¿¼ï¼Œæ˜¯äº’è”ç½‘æŠ€æœ¯åˆ›æ–°ä¸æ–°é—»ä»·å€¼ä¼ æ‰¿çš„ç»“åˆä½“ï¼Œè‡´åŠ›äºé—®ç­”å¼æ–°é—»ä¸æ–°é—»è¿½è¸ªåŠŸèƒ½çš„å®è·µã€‚" name="Description"/&gt;
&lt;meta content="max-age=1700" http-equiv="Cache-control"/&gt;
&lt;meta content="on" http-equiv="cleartype"/&gt;
&lt;title&gt;æ—¶å·®æ’­å®¢ï¸±å®—æ•™å­¦ï¼šä¿¡ä»°ï¼Œé­”æ³•ï¼Œèº«ä»½ï¼ŒæƒåŠ›&lt;/title&gt;
&lt;link href="https://file.thepaper.cn/wap/v6/css/reset.css?v=2.1.5" rel="stylesheet" type="text/css"/&gt;
&lt;link href="https://file.thepaper.cn/wap/v6/css/swiper-bundle.min.css" rel="stylesheet" type="text/css"/&gt;
&lt;link href="https://file.thepaper.cn/wap/v6/css/base_v6.css?v=2.1.5" rel="stylesheet" type="text/css"/&gt;
&lt;link href="https://file.thepaper.cn/wap/v6/css/homepage_v6.css?v=2.1.5" rel="stylesheet" type="text/css"/&gt;
&lt;link href="https://file.thepaper.cn/wap/v6/css/newsdetail_v6.css?v=2.1.5" rel="stylesheet" type="text/css"/&gt;
&lt;script src="//7b71.t4m.cn/applink.js" type="text/jav
</pre>
</div>
</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Step-3:-Get-the-text-with-tags-removal-and-without-class-selection">
<a class="anchor" href="#Step-3:-Get-the-text-with-tags-removal-and-without-class-selection" aria-hidden="true"><span class="octicon octicon-link"></span></a><strong>Step 3:</strong> Get the text with tags removal and without class selection<a class="anchor-link" href="#Step-3:-Get-the-text-with-tags-removal-and-without-class-selection"> </a>
</h3>
<p>To clean it up, we need to extract the content using <strong>extract()</strong> and <strong>get_text()</strong>. Now things look much better! Nonetheless, we still need to remove the header texts.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-python"><pre><span></span><span class="k">for</span> <span class="n">script</span> <span class="ow">in</span> <span class="n">soup</span><span class="p">([</span><span class="s2">"script"</span><span class="p">,</span> <span class="s2">"style"</span><span class="p">]):</span>
    <span class="n">script</span><span class="o">.</span><span class="n">extract</span><span class="p">()</span>    <span class="c1"># rip it out</span>

<span class="c1"># get text</span>
<span class="n">text</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">get_text</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-python"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">text</span><span class="p">[</span><span class="mi">500</span><span class="p">:</span><span class="mi">1500</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>ç§å®¶åœ°ç†
éå¸¸å“
æ¥¼å¸‚
ç”Ÿæ´»æ–¹å¼
æ¾æ¹ƒè”æ’­
è§†ç•Œ
äº²å­å­¦å ‚
åŒ—äº¬å†¬å¥¥
æ±½è½¦åœˆ











æ€æƒ³å¸‚åœº

å»APPå¬


æ—¶å·®æ’­å®¢ï¸±å®—æ•™å­¦ï¼šä¿¡ä»°ï¼Œé­”æ³•ï¼Œèº«ä»½ï¼ŒæƒåŠ›
æ—¶å·®æ’­å®¢

                2021-07-30 12:29Â 
                
                    
                        æ¥æºï¼šæ¾æ¹ƒæ–°é—»
                    
                    
                
            







            {{newsTimeline.name}}
        







                        {{item.occurrenceDay}}
                    





{{content.occurrenceTime}}

 {{content.name}}

æŸ¥çœ‹è¯¦æƒ…







å…¨éƒ¨å±•å¼€
æ”¶èµ·æ—¶é—´çº¿



æœ¬æœŸã€Šæ—¶å·®ã€‹æ’­å®¢ï¼Œä¸»æŒäººå¤šä¼¦å¤šå¤§å­¦åŠ©ç†æ•™æˆéƒ­å©·é‚€è¯·åˆ°äº†æ¥è‡ªå®¾å¤•æ³•å°¼äºšå¤§å­¦çš„ç¨‹æ™“æ–‡æ•™æˆã€é¦™æ¸¯å¤§å­¦çš„æçºªæ•™æˆã€å¼—å‰å°¼äºšç†å·¥å¤§å­¦çš„å€ªæ¹›èˆ¸æ•™æˆä»¥åŠèŠåŠ å“¥å¤§å­¦ç¥å­¦é™¢çš„ç¥åŠ¡ç¡•å£«ã€åŒ»é™¢å®—æ•™å¸ˆéƒ‘åˆ©æ˜•ï¼Œä»¥â€œå®—æ•™å­¦ï¼šä¿¡ä»°ï¼Œé­”æ³•ï¼Œèº«ä»½ï¼ŒæƒåŠ›â€ä¸ºé¢˜å±•å¼€è®¨è®ºã€‚å®—æ•™å¹¶ä¸å¤–åœ¨äºæ—¥å¸¸ç”Ÿæ´»ï¼Œè€Œæ˜¯å¼¥æ•£åœ¨ç¤¾ä¼šã€å†å²ã€æ–‡åŒ–ã€æ”¿æ²»ä¸­çš„ç‚¹æ»´ï¼›å®—æ•™å­¦å¸®åŠ©æˆ‘ä»¬åæ€å†å²ï¼ŒåŒæ—¶ç†è§£ä»Šå¤©çš„ä¸–ç•Œã€‚æœ¬æ–‡ä¸ºæ—¶å·®æ’­å®¢ä¸æ¾æ¹ƒæ–°é—»åˆä½œåˆŠå‘çš„æ–‡å­—ç¨¿ï¼Œç”±æ¾æ¹ƒæ–°é—»ï¼ˆwww.thepaper.cnï¼‰è®°è€…é¾šæ€é‡æ•´ç†ã€‚è§‚éŸ³è€æ¯æ´éƒ­å©·ï¼šåœ¨ä»Šå¤©èŠ‚ç›®å¼€å§‹ä¹‹å‰ï¼Œæˆ‘æƒ³å…ˆè¡¨è¾¾ä¸€ä¸‹æ²‰ç—›çš„æ‚¼å¿µï¼Œå‰å‡ å¤©æœ‰ä¸€ä½å®—æ•™å­¦ç•Œçš„å‰è¾ˆï¼Œå°å¤§çš„æ—å¯Œå£«è€å¸ˆï¼ˆ1960-2021ï¼‰å»ä¸–äº†ã€‚æˆ‘æœ¬æ¥å¹¶ä¸æ˜¯ç ”ç©¶ä¸­å›½å®—æ•™çš„ï¼Œä¹Ÿä¸ç ”ç©¶ä¼ ç»Ÿçš„ä¸­å›½æ–‡å²å“²ï¼Œæ‰€ä»¥å¹¶æ²¡æœ‰å’Œæ—è€å¸ˆè§è¿‡é¢ã€‚ä½†æˆ‘ä¸€ç›´ä»ä»–çš„ç ”ç©¶ä¸­å¾—åˆ°çµæ„Ÿï¼Œæ‰€ä»¥éå¸¸æ„Ÿè°¢ä»–ã€‚è¿™ä¸¤å¤©ä¹Ÿåœ¨è„¸ä¹¦ä¸Šï¼Œçœ‹åˆ°å¾ˆå¤šä»–è¿‡å»çš„åŒäº‹å’Œå­¦ç”Ÿå¯¹ä»–çš„çºªå¿µã€‚è™½ç„¶å­¦æœ¯ç•Œå¾ˆå¤šæ—¶å€™æ˜¯ä¸€ä¸ªæœ‰å¤±å…¬æ­£çš„åœ°æ–¹ï¼Œä½†è¿˜æ˜¯æœ‰ä¸€äº›åœ°æ–¹è®©äººè§‰å¾—æ¸©æš–ï¼Œå°±å¥½åƒç‚¹äº®äº†ä¸€ç›ç¯ï¼Œè€Œé‚£ç›ç¯ä¸€ç›´ä¼šäº®ä¸‹å»ã€‚è¿™ä¸€æœŸæˆ‘ä»¬æ¥è°ˆå®—æ•™å­¦ï¼Œä¸åªæ˜¯è°ˆå­¦ç•Œï¼Œä¹Ÿè°ˆå®ƒçš„å®è·µã€‚åœ¨åº§å‡ ä½è™½ç„¶æ˜¯è·¨å­¦ç§‘çš„ç ”ç©¶è€…æˆ–å®è·µè€…ï¼Œä½†ä¹Ÿæ˜¯å®—æ•™å­¦å‡ºèº«ã€‚é‚£æˆ‘ç›¸ä¿¡ï¼Œå¤§å®¶åœ¨å’Œåˆ«äººä»‹ç»è¯´è‡ªå·±ç ”ç©¶å®—æ•™å­¦çš„æ—¶å€™ï¼Œé€šå¸¸ä¼šå¬åˆ°å‡ ä¸ªé—®é¢˜ï¼š
</pre>
</div>
</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Step-4:-Get-the-text-with-tags-removal-and-class-selection">
<a class="anchor" href="#Step-4:-Get-the-text-with-tags-removal-and-class-selection" aria-hidden="true"><span class="octicon octicon-link"></span></a><strong>Step 4:</strong> Get the text with tags removal and class selection<a class="anchor-link" href="#Step-4:-Get-the-text-with-tags-removal-and-class-selection"> </a>
</h3>
<p>We can remove all irrelevant sessions from the website by specifying the class. We can filter a specific class using <strong>find()</strong>. The class is identified using the developer tools in the browser. Please pay attention: we can only get the <strong>first item</strong> in this class using find(). Another option would be <strong>find_all()</strong> which returns a list of matches. The output is the clean text we were expecting.ğŸŒŸ</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-python"><pre><span></span><span class="n">text</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">"div"</span><span class="p">,</span> <span class="p">{</span><span class="s2">"class"</span><span class="p">:</span> <span class="s2">"newsdetail_content"</span><span class="p">})</span><span class="o">.</span><span class="n">get_text</span><span class="p">()</span>

<span class="n">text</span><span class="p">[:</span><span class="mi">1000</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>'æœ¬æœŸã€Šæ—¶å·®ã€‹æ’­å®¢ï¼Œä¸»æŒäººå¤šä¼¦å¤šå¤§å­¦åŠ©ç†æ•™æˆéƒ­å©·é‚€è¯·åˆ°äº†æ¥è‡ªå®¾å¤•æ³•å°¼äºšå¤§å­¦çš„ç¨‹æ™“æ–‡æ•™æˆã€é¦™æ¸¯å¤§å­¦çš„æçºªæ•™æˆã€å¼—å‰å°¼äºšç†å·¥å¤§å­¦çš„å€ªæ¹›èˆ¸æ•™æˆä»¥åŠèŠåŠ å“¥å¤§å­¦ç¥å­¦é™¢çš„ç¥åŠ¡ç¡•å£«ã€åŒ»é™¢å®—æ•™å¸ˆéƒ‘åˆ©æ˜•ï¼Œä»¥â€œå®—æ•™å­¦ï¼šä¿¡ä»°ï¼Œé­”æ³•ï¼Œèº«ä»½ï¼ŒæƒåŠ›â€ä¸ºé¢˜å±•å¼€è®¨è®ºã€‚å®—æ•™å¹¶ä¸å¤–åœ¨äºæ—¥å¸¸ç”Ÿæ´»ï¼Œè€Œæ˜¯å¼¥æ•£åœ¨ç¤¾ä¼šã€å†å²ã€æ–‡åŒ–ã€æ”¿æ²»ä¸­çš„ç‚¹æ»´ï¼›å®—æ•™å­¦å¸®åŠ©æˆ‘ä»¬åæ€å†å²ï¼ŒåŒæ—¶ç†è§£ä»Šå¤©çš„ä¸–ç•Œã€‚æœ¬æ–‡ä¸ºæ—¶å·®æ’­å®¢ä¸æ¾æ¹ƒæ–°é—»åˆä½œåˆŠå‘çš„æ–‡å­—ç¨¿ï¼Œç”±æ¾æ¹ƒæ–°é—»ï¼ˆwww.thepaper.cnï¼‰è®°è€…é¾šæ€é‡æ•´ç†ã€‚è§‚éŸ³è€æ¯æ´éƒ­å©·ï¼šåœ¨ä»Šå¤©èŠ‚ç›®å¼€å§‹ä¹‹å‰ï¼Œæˆ‘æƒ³å…ˆè¡¨è¾¾ä¸€ä¸‹æ²‰ç—›çš„æ‚¼å¿µï¼Œå‰å‡ å¤©æœ‰ä¸€ä½å®—æ•™å­¦ç•Œçš„å‰è¾ˆï¼Œå°å¤§çš„æ—å¯Œå£«è€å¸ˆï¼ˆ1960-2021ï¼‰å»ä¸–äº†ã€‚æˆ‘æœ¬æ¥å¹¶ä¸æ˜¯ç ”ç©¶ä¸­å›½å®—æ•™çš„ï¼Œä¹Ÿä¸ç ”ç©¶ä¼ ç»Ÿçš„ä¸­å›½æ–‡å²å“²ï¼Œæ‰€ä»¥å¹¶æ²¡æœ‰å’Œæ—è€å¸ˆè§è¿‡é¢ã€‚ä½†æˆ‘ä¸€ç›´ä»ä»–çš„ç ”ç©¶ä¸­å¾—åˆ°çµæ„Ÿï¼Œæ‰€ä»¥éå¸¸æ„Ÿè°¢ä»–ã€‚è¿™ä¸¤å¤©ä¹Ÿåœ¨è„¸ä¹¦ä¸Šï¼Œçœ‹åˆ°å¾ˆå¤šä»–è¿‡å»çš„åŒäº‹å’Œå­¦ç”Ÿå¯¹ä»–çš„çºªå¿µã€‚è™½ç„¶å­¦æœ¯ç•Œå¾ˆå¤šæ—¶å€™æ˜¯ä¸€ä¸ªæœ‰å¤±å…¬æ­£çš„åœ°æ–¹ï¼Œä½†è¿˜æ˜¯æœ‰ä¸€äº›åœ°æ–¹è®©äººè§‰å¾—æ¸©æš–ï¼Œå°±å¥½åƒç‚¹äº®äº†ä¸€ç›ç¯ï¼Œè€Œé‚£ç›ç¯ä¸€ç›´ä¼šäº®ä¸‹å»ã€‚è¿™ä¸€æœŸæˆ‘ä»¬æ¥è°ˆå®—æ•™å­¦ï¼Œä¸åªæ˜¯è°ˆå­¦ç•Œï¼Œä¹Ÿè°ˆå®ƒçš„å®è·µã€‚åœ¨åº§å‡ ä½è™½ç„¶æ˜¯è·¨å­¦ç§‘çš„ç ”ç©¶è€…æˆ–å®è·µè€…ï¼Œä½†ä¹Ÿæ˜¯å®—æ•™å­¦å‡ºèº«ã€‚é‚£æˆ‘ç›¸ä¿¡ï¼Œå¤§å®¶åœ¨å’Œåˆ«äººä»‹ç»è¯´è‡ªå·±ç ”ç©¶å®—æ•™å­¦çš„æ—¶å€™ï¼Œé€šå¸¸ä¼šå¬åˆ°å‡ ä¸ªé—®é¢˜ï¼šä¸€ä¸ªæ˜¯é‚£ä½ æœ‰æ²¡æœ‰å®—æ•™ä¿¡ä»°ï¼Ÿæˆ–è€…ä½ ç ”ç©¶å“ªä¸€ç§å®—æ•™ï¼Ÿä»¥å‰è¿˜ä¼šå¬åˆ°çš„ä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œé‚£ä½ æ¯•ä¸šä¹‹ååšä»€ä¹ˆï¼Œæ˜¯ä¸æ˜¯å‡†å¤‡å‡ºå®¶ç­‰ç­‰ã€‚æˆ‘ä»¥å‰ä¼šå¼€ç©ç¬‘è¯´ï¼Œå¯¹ï¼Œä»¥åå‡ºå®¶ç»™äººç®—å‘½ã€‚å…¶å®ä¸åªæ˜¯å­¦ç•Œä¹‹å¤–ï¼ŒåŒ…æ‹¬å­¦ç•Œä¹‹å†…ï¼Œä¸åŒå­¦ç§‘å¯¹å®—æ•™å­¦é¢†åŸŸéƒ½ä¼šæœ‰ä¸€äº›é™Œç”Ÿï¼Œå› ä¸ºå®ƒç¡®å®æ˜¯ä¸€ä¸ªæ¯”è¾ƒç‰¹æ®Šçš„å­¦ç§‘ã€‚å°±æˆ‘è‡ªå·±è€Œè¨€ï¼Œæˆ‘åšå£«çš„è®­ç»ƒåœ¨çˆ±ä¸å ¡å¤§å­¦çš„ç¥å­¦é™¢ã€‚çˆ±å¤§ç¥å­¦é™¢ä½œä¸ºä¸€ä¸ªæ–°å…´ç§‘ç³»ï¼Œæ¯”è¾ƒæœ‰æŠ—äº‰ç²¾ç¥å’Œåˆ›æ–°ç²¾ç¥ã€‚å®ƒè®¾ç«‹ä¹‹åˆå°±æ˜¯ä¸ºäº†å’Œä¼ ç»Ÿçš„ç¥å­¦æˆ–è€…æ˜¯å’Œå®—æ•™æœ‰å…³çš„å­¦ç§‘å¯¹æŠ—ï¼Œæ‰€ä»¥å®ƒéå¸¸è®²ç©¶ä¸–ä¿—åŒ–å’Œç¤¾ä¼šç§‘å­¦æ–¹æ³•ã€‚æˆ‘è®°å¾—å¤§éƒ¨åˆ†å®—æ•™ç³»çš„å­¦è€…ä¸è®ºç”·å¥³éƒ½æ‰“æ‰®å¾—éå¸¸ä¸ç¾ã€‚åœ¨å¼€ä¼šçš„æ—¶å€™ï¼Œç¾å›½å®—æ•™å­¦ã€å°¤å…¶æ˜¯åœ£ç»ç ”ç©¶çš„å­¦è€…å°¤å…¶ç”·æ€§ä¼šæ‰“æ‰®å¾—éå¸¸é—ªäº®ï¼Œå¤´å‘ç„—è¿‡ã€ç©¿è¥¿è£…ã€å¸¦é¢†å¸¦ã€é‹å­éƒ½æ“¦å¾—å¾ˆäº®ï¼Œä½†æ˜¯è‹±å›½å®—æ•™ç³»çš„è€å¸ˆå°±ç©¿å¾—å¾ˆéšä¾¿ã€‚è€Œå®—æ•™å­¦å­¦ç§‘çš„è®­ç»ƒè®²ç©¶å®—æ•™å’Œç¤¾ä¼šçš„å…³ç³»ã€å®—æ•™å’Œå½“ä¸‹ç¤¾ä¼šçš„å…³ç³»ã€‚è™½ç„¶æˆ‘å½“æ—¶çš„ç ”ç©¶æ˜¯ä»AIäººå·¥æ™ºèƒ½åˆ‡å…¥ï¼Œä½†å…¶å®æ˜¯ç ”ç©¶æ˜¯è‹±å›½çš„ä¸–ä¿—åŒ–çš„æƒ…å†µã€‚å½“ç„¶ï¼Œåœ¨ç¥å­¦é™¢ä¹Ÿä¼šç¢°åˆ°å…¶ä»–ç§‘ç³»çš„åŒå­¦ï¼Œæ¯”å¦‚æœ‰æ—§çº¦ç ”ç©¶ã€æ–°çº¦ç ”ç©¶ï¼Œç¥å­¦ç ”ç©¶ï¼Œç„¶åä¹Ÿæœ‰ä¸€äº›é“å­¦åšå£«æˆ–è€…æ˜¯æ•™ç‰§å­¦çš„å­¦ä½ã€‚é‚£æƒ³è¯·å‡ ä½èŠèŠï¼Œä½ ä»¬çš„ç ”ç©¶èƒŒæ™¯æ˜¯æ€ä¹ˆæ ·çš„ï¼Œä¹Ÿå¯ä»¥è·Ÿ'</pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Step-5:-Keyword-Extraction">
<a class="anchor" href="#Step-5:-Keyword-Extraction" aria-hidden="true"><span class="octicon octicon-link"></span></a><strong>Step 5:</strong> Keyword Extraction<a class="anchor-link" href="#Step-5:-Keyword-Extraction"> </a>
</h3>
<p><strong>The final step is exactly what we did in the <a href="https://pinkychow1010.github.io/digital-chinese-history-blog/level-4/chapter-4/jieba/text-mining/2022/02/05/Chinese_Keyword_Extraction_1.html">last tutorial</a>!</strong> It defines the stopwords and extracts 10 keywords from the text.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-python"><pre><span></span><span class="n">stopwords</span><span class="o">=</span> <span class="sa">r</span><span class="s2">"/content/drive/MyDrive/NLP/stopwords.txt"</span>
<span class="n">url</span> <span class="o">=</span> <span class="s2">"https://m.thepaper.cn/newsDetail_forward_16254733"</span>

<span class="n">jieba</span><span class="o">.</span><span class="n">analyse</span><span class="o">.</span><span class="n">set_stop_words</span><span class="p">(</span><span class="n">stopwords</span><span class="p">)</span>
<span class="n">tags</span> <span class="o">=</span> <span class="n">jieba</span><span class="o">.</span><span class="n">analyse</span><span class="o">.</span><span class="n">extract_tags</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">topK</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">withWeight</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Keywords:">
<a class="anchor" href="#Keywords:" aria-hidden="true"><span class="octicon octicon-link"></span></a><strong>Keywords:</strong><a class="anchor-link" href="#Keywords:"> </a>
</h4>
<p>Let's look at our result.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-python"><pre><span></span><span class="n">tags</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>[('å®—æ•™', 0.2162035113456979),
 ('ç ”ç©¶', 0.1056884665277731),
 ('å®—æ•™å­¦', 0.07345268363971678),
 ('åŸºç£æ•™', 0.061966732508025965),
 ('å¥³æ€§', 0.05076592702813553),
 ('ç¥å­¦é™¢', 0.04378034740564733),
 ('å¤©ä¸»æ•™', 0.040147481422144304),
 ('ä¼ ç»Ÿ', 0.033391922322156105),
 ('ç°åœ¨', 0.032659074433310856),
 ('ç¤¾ä¼š', 0.031786899511790284)]</pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Writing-a-Function">
<a class="anchor" href="#Writing-a-Function" aria-hidden="true"><span class="octicon octicon-link"></span></a>Writing a Function<a class="anchor-link" href="#Writing-a-Function"> </a>
</h1>
<p>To simplify the steps, we can condense everything into a short function. If you do not know yet how to build a function, <a href="https://pinkychow1010.github.io/digital-chinese-history-blog/programming/chapter-1/level-1/2020/01/26/FunctionsNLoops_Basics.html">check it out</a>. This function will take an URL, the number of keywords and a stopword list. It will then return the keywords in the list.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-python"><pre><span></span><span class="k">def</span> <span class="nf">extract_keywords</span><span class="p">(</span><span class="n">url</span><span class="p">,</span><span class="n">n</span><span class="p">,</span><span class="n">stopwords</span><span class="p">,</span> <span class="n">withWeight</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
  <span class="sd">"""</span>
<span class="sd">  This function extract a number of keywords from a webpage after excluding the stopwords</span>
<span class="sd">  url: str</span>
<span class="sd">    the webpage</span>
<span class="sd">  n: int</span>
<span class="sd">    number of keywords extracted</span>
<span class="sd">  stopwords: str</span>
<span class="sd">    a path to the stopword text file</span>
<span class="sd">  returns: list</span>
<span class="sd">    list of keywords extracted from the webpage</span>
<span class="sd">  """</span>
  <span class="n">req</span> <span class="o">=</span> <span class="n">Request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="p">{</span><span class="s2">"User-Agent"</span><span class="p">:</span> <span class="s2">"Mozilla/5.0"</span><span class="p">})</span>
  <span class="n">html</span> <span class="o">=</span> <span class="n">urlopen</span><span class="p">(</span><span class="n">req</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
  <span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">html</span><span class="p">,</span> <span class="n">features</span><span class="o">=</span><span class="s2">"html.parser"</span><span class="p">)</span>

  <span class="c1"># kill all script and style elements</span>
  <span class="k">for</span> <span class="n">script</span> <span class="ow">in</span> <span class="n">soup</span><span class="p">([</span><span class="s2">"script"</span><span class="p">,</span> <span class="s2">"style"</span><span class="p">]):</span>
      <span class="n">script</span><span class="o">.</span><span class="n">extract</span><span class="p">()</span>    <span class="c1"># rip it out</span>

  <span class="c1"># get text</span>
  <span class="n">text</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">"div"</span><span class="p">,</span> <span class="p">{</span><span class="s2">"class"</span><span class="p">:</span> <span class="s2">"newsdetail_content"</span><span class="p">})</span><span class="o">.</span><span class="n">get_text</span><span class="p">()</span>

  <span class="c1"># exclude stopwords</span>
  <span class="n">jieba</span><span class="o">.</span><span class="n">analyse</span><span class="o">.</span><span class="n">set_stop_words</span><span class="p">(</span><span class="n">stopwords</span><span class="p">)</span>

  <span class="c1"># get keywords</span>
  <span class="n">tags</span> <span class="o">=</span> <span class="n">jieba</span><span class="o">.</span><span class="n">analyse</span><span class="o">.</span><span class="n">extract_tags</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">topK</span><span class="o">=</span><span class="n">n</span><span class="p">,</span> <span class="n">withWeight</span><span class="o">=</span><span class="n">withWeight</span><span class="p">)</span>
  <span class="k">return</span> <span class="n">tags</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>By applying the function, we get a list of 10 keywords:
<strong>'ç ”ç©¶', 'è¯—æ­Œ', 'ä¸­å›½', 'è”¡å®—é½', 'å­¦è€…', 'æ¾æ¹ƒ', 'æ–‡å­¦', 'è¯—å¢ƒ', 'è¯­æ³•', 'æ±‰è¯—'</strong></p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-python"><pre><span></span><span class="n">stopwords</span><span class="o">=</span> <span class="sa">r</span><span class="s2">"/content/drive/MyDrive/NLP/stopwords.txt"</span>
<span class="n">n</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">url</span> <span class="o">=</span> <span class="s2">"https://m.thepaper.cn/newsDetail_forward_16254733"</span>

<span class="n">extract_keywords</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span><span class="n">n</span><span class="o">=</span><span class="n">n</span><span class="p">,</span><span class="n">stopwords</span><span class="o">=</span><span class="n">stopwords</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>['ç ”ç©¶', 'è¯—æ­Œ', 'ä¸­å›½', 'è”¡å®—é½', 'å­¦è€…', 'æ¾æ¹ƒ', 'æ–‡å­¦', 'è¯—å¢ƒ', 'è¯­æ³•', 'æ±‰è¯—']</pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Try-it-out-yourself-ğŸ§">
<a class="anchor" href="#Try-it-out-yourself-%F0%9F%A7%90" aria-hidden="true"><span class="octicon octicon-link"></span></a><strong>Try it out yourself</strong> ğŸ§<a class="anchor-link" href="#Try-it-out-yourself-%F0%9F%A7%90"> </a>
</h2>
</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-python"><pre><span></span><span class="k">def</span> <span class="nf">extract_keywords_general</span><span class="p">(</span><span class="n">url</span><span class="p">,</span><span class="n">n</span><span class="p">,</span><span class="n">stopwords</span><span class="p">,</span> <span class="n">withWeight</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
  <span class="sd">"""</span>
<span class="sd">  This function extract a number of keywords from a webpage after excluding the stopwords</span>
<span class="sd">  url: str</span>
<span class="sd">    the webpage</span>
<span class="sd">  n: int</span>
<span class="sd">    number of keywords extracted</span>
<span class="sd">  stopwords: str</span>
<span class="sd">    a path to the stopword text file</span>
<span class="sd">  returns: list</span>
<span class="sd">    list of keywords extracted from the webpage</span>
<span class="sd">  """</span>
  <span class="n">req</span> <span class="o">=</span> <span class="n">Request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="p">{</span><span class="s2">"User-Agent"</span><span class="p">:</span> <span class="s2">"Mozilla/5.0"</span><span class="p">})</span>
  <span class="n">html</span> <span class="o">=</span> <span class="n">urlopen</span><span class="p">(</span><span class="n">req</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
  <span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">html</span><span class="p">,</span> <span class="n">features</span><span class="o">=</span><span class="s2">"html.parser"</span><span class="p">)</span>

  <span class="c1"># kill all script and style elements</span>
  <span class="k">for</span> <span class="n">script</span> <span class="ow">in</span> <span class="n">soup</span><span class="p">([</span><span class="s2">"script"</span><span class="p">,</span> <span class="s2">"style"</span><span class="p">]):</span>
      <span class="n">script</span><span class="o">.</span><span class="n">extract</span><span class="p">()</span>    <span class="c1"># rip it out</span>

  <span class="c1"># get text</span>
  <span class="n">text</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">get_text</span><span class="p">()</span>

  <span class="c1"># exclude stopwords</span>
  <span class="n">jieba</span><span class="o">.</span><span class="n">analyse</span><span class="o">.</span><span class="n">set_stop_words</span><span class="p">(</span><span class="n">stopwords</span><span class="p">)</span>

  <span class="c1"># get keywords</span>
  <span class="n">tags</span> <span class="o">=</span> <span class="n">jieba</span><span class="o">.</span><span class="n">analyse</span><span class="o">.</span><span class="n">extract_tags</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">topK</span><span class="o">=</span><span class="n">n</span><span class="p">,</span> <span class="n">withWeight</span><span class="o">=</span><span class="n">withWeight</span><span class="p">)</span>
  <span class="k">return</span> <span class="n">tags</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="ğŸ¤”-Put-a-URL-here-â¬‡ï¸">
<a class="anchor" href="#%F0%9F%A4%94-Put-a-URL-here-%E2%AC%87%EF%B8%8F" aria-hidden="true"><span class="octicon octicon-link"></span></a>ğŸ¤” Put a URL here â¬‡ï¸<a class="anchor-link" href="#%F0%9F%A4%94-Put-a-URL-here-%E2%AC%87%EF%B8%8F"> </a>
</h1>
</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-python"><pre><span></span><span class="n">stopwords</span><span class="o">=</span> <span class="sa">r</span><span class="s2">"/content/drive/MyDrive/NLP/stopwords.txt"</span>

<span class="n">myKeywords</span> <span class="o">=</span> <span class="n">extract_keywords_general</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="s2">"https://ctext.org/zh"</span><span class="p">,</span><span class="n">n</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span><span class="n">stopwords</span><span class="o">=</span><span class="n">stopwords</span><span class="p">)</span> <span class="c1"># Put in any URL you want</span>
<span class="nb">print</span><span class="p">(</span><span class="n">myKeywords</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>['è³‡æ–™', 'é¡¯ç¤º', 'ä¾†æº', 'æ–‡ç»', 'å­—é«”', 'ä¸­åœ‹', 'åœ–æ›¸é¤¨', 'é€™äº›', 'æœ¬ç«™', 'ç®—ç¶“']
</pre>
</div>
</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Extract-Keywords-from-Multiple-Blogs">
<a class="anchor" href="#Extract-Keywords-from-Multiple-Blogs" aria-hidden="true"><span class="octicon octicon-link"></span></a>Extract Keywords from Multiple Blogs<a class="anchor-link" href="#Extract-Keywords-from-Multiple-Blogs"> </a>
</h2>
<p>Until now, we can only extract keywords for one text at a time. To further automate what we did, we can loop through multiple articles. If you do not know yet how to build a loop, <a href="https://pinkychow1010.github.io/digital-chinese-history-blog/programming/chapter-1/level-1/2020/01/26/FunctionsNLoops_Basics.html">check it out</a>. Please pay attention: as we are going through the webpages using Python, the server might be overloaded with too many requests in a very short time. To avoid potential errors, we can catch the errors using <strong>try</strong> and <strong>except</strong>, and put <strong>time.sleep()</strong> in between using <strong>time</strong> library. We will let the program <em>sleep</em> for 5 seconds after scrapping each web address.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-python"><pre><span></span><span class="n">stopwords</span><span class="o">=</span> <span class="sa">r</span><span class="s2">"/content/drive/MyDrive/NLP/stopwords.txt"</span>
<span class="n">n</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">keyword_list</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">page</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10000000</span><span class="p">,</span><span class="mi">10000010</span><span class="p">):</span>
  <span class="n">url</span> <span class="o">=</span> <span class="s2">"https://m.thepaper.cn/newsDetail_forward_</span><span class="si">{}</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">page</span><span class="p">)</span>
  <span class="nb">print</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
  <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>

  <span class="k">try</span><span class="p">:</span>
    <span class="n">keywords</span> <span class="o">=</span> <span class="n">extract_keywords</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span><span class="n">n</span><span class="o">=</span><span class="n">n</span><span class="p">,</span><span class="n">stopwords</span><span class="o">=</span><span class="n">stopwords</span><span class="p">)</span>
  <span class="k">except</span> <span class="n">Exceptions</span><span class="p">:</span>
      <span class="nb">print</span><span class="p">(</span><span class="s2">"Interrupted"</span><span class="p">)</span>

  <span class="n">keyword_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">keywords</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>https://m.thepaper.cn/newsDetail_forward_10000000
</pre>
</div>
</div>

<div class="output_area">

<div class="output_subarea output_stream output_stderr output_text">
<pre>Building prefix dict from the default dictionary ...
Dumping model to file cache /tmp/jieba.cache
Loading model cost 1.096 seconds.
Prefix dict has been built successfully.
</pre>
</div>
</div>

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>https://m.thepaper.cn/newsDetail_forward_10000001
https://m.thepaper.cn/newsDetail_forward_10000002
https://m.thepaper.cn/newsDetail_forward_10000003
https://m.thepaper.cn/newsDetail_forward_10000004
https://m.thepaper.cn/newsDetail_forward_10000005
https://m.thepaper.cn/newsDetail_forward_10000006
https://m.thepaper.cn/newsDetail_forward_10000007
https://m.thepaper.cn/newsDetail_forward_10000008
https://m.thepaper.cn/newsDetail_forward_10000009
</pre>
</div>
</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Export-Keyword-List">
<a class="anchor" href="#Export-Keyword-List" aria-hidden="true"><span class="octicon octicon-link"></span></a><strong>Export Keyword List</strong><a class="anchor-link" href="#Export-Keyword-List"> </a>
</h2>
<p>We have appended the keywords to a list <strong>keyword_list</strong> when we loop through the articles. Now, we can access all keywords by looking into our list.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-python"><pre><span></span><span class="n">keyword_list</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>[['æ‹”èåœ', 'èåœ', 'é‡‡æ‘˜', 'å­©å­', 'èœå›­', 'æ”¶è·', 'å‘¨æœ«ç‰ˆ', 'å®è·µ', 'çƒ­çˆ±åŠ³åŠ¨', 'ç»ˆè§‰'],
 ['ç»¿è‰²', 'å¾ªç¯', 'æ¹–å—çœ', '10', 'ç¯ä¿', 'ç”Ÿæ€', 'æ´»åŠ¨', 'å…‘æ¢', 'åƒåœ¾', 'åˆ†ç±»'],
 ['å´é‚®é‚®', 'ä¸‰è½®è½¦', 'å­©å­', 'å°å­™å­', 'äº‹è¿¹', 'å½’ä»', '2019', '12', 'é«˜æ–‡å¨Ÿ', 'å¾®ä¿¡'],
 ['æµ™å¤§', 'æµ™æ±Ÿå¤§å­¦', 'æ–°äºº', 'è®°è€…å›¢', 'ç¼˜å®š', 'æ˜Ÿæ²³', 'æ¯æ ¡', '2020', '123', 'æå…°å¨Ÿ'],
 ['æµå—', 'å…¬å®‰', 'æŠ¥å‘Š', 'åŸæ–‡', 'äº¤è­¦', 'æ ‡é¢˜', 'é˜…è¯»'],
 ['å¹´ä¼š', 'ç¯ä¿', 'æ¹–å—çœ', 'ç¤¾ä¼š', 'è¡ŒåŠ¨è€…', '2020', 'ç”Ÿæ€', 'ç»„ç»‡', 'ç»¿è‰²', 'ç¯å¢ƒæ²»ç†'],
 ['æ–©è‚‰', 'æµ·å®‰', 'ç‚¸åˆ¶', 'ç™½æ–©', 'ç‚–ç…®', '--', 'è‘±å§œ', 'çŒ´æ€¥', 'éº»è™¾', 'é»„æ¯›'],
 ['é«˜æ°', 'æ‰§æ³•', 'å­¦æ³•', 'å…¬å®‰', 'å…¬å®‰æœºå…³', 'å¤šé¢æ‰‹', 'å…¨å¸‚', 'æ³•æ²»', 'å¤è®®', 'æ°‘è­¦'],
 ['æ —å­', 'å¥½é’°', 'ç‚’æ —å­', 'è™¹å£', 'å°è™¹', 'æµ·å®è·¯', 'å¥½å¥½', '00', 'é‡æ —', 'æ¿æ —'],
 ['æµ·å®‰', 'åšç‰©é¦†', 'é™¶ç“·', 'é¸£è°¢', 'åŒ å¿ƒç‹¬è¿', 'ç¾è½®ç¾å¥‚', 'æ—è£•ç¿”', 'é‚°é¢–', 'å–œæ¬¢', 'å…‰è¾‰ç¿çƒ‚']]</pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We can also choose to put the list in a <strong>Pandas</strong> data frame and export it to a <strong>csv</strong> file. If you want to learn more about Pandas, check it out <a href="https://pinkychow1010.github.io/digital-chinese-history-blog/level-2/chapter-2/data-manipulation/pandas/2020/01/23/Pandas_TextAnalysis_TextOriganization.html">here</a>.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-python"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">keyword_list</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Save each keyword into separate columns as strings.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-python"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>
<span class="n">df</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">

  <div id="df-6e4a2242-7880-4b8a-a492-51e9c31dcf7b">
    <div class="colab-df-container">
      <div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>0</th>
      <th>1</th>
      <th>2</th>
      <th>3</th>
      <th>4</th>
      <th>5</th>
      <th>6</th>
      <th>7</th>
      <th>8</th>
      <th>9</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>æ‹”èåœ</td>
      <td>èåœ</td>
      <td>é‡‡æ‘˜</td>
      <td>å­©å­</td>
      <td>èœå›­</td>
      <td>æ”¶è·</td>
      <td>å‘¨æœ«ç‰ˆ</td>
      <td>å®è·µ</td>
      <td>çƒ­çˆ±åŠ³åŠ¨</td>
      <td>ç»ˆè§‰</td>
    </tr>
    <tr>
      <th>1</th>
      <td>ç»¿è‰²</td>
      <td>å¾ªç¯</td>
      <td>æ¹–å—çœ</td>
      <td>10</td>
      <td>ç¯ä¿</td>
      <td>ç”Ÿæ€</td>
      <td>æ´»åŠ¨</td>
      <td>å…‘æ¢</td>
      <td>åƒåœ¾</td>
      <td>åˆ†ç±»</td>
    </tr>
    <tr>
      <th>2</th>
      <td>å´é‚®é‚®</td>
      <td>ä¸‰è½®è½¦</td>
      <td>å­©å­</td>
      <td>å°å­™å­</td>
      <td>äº‹è¿¹</td>
      <td>å½’ä»</td>
      <td>2019</td>
      <td>12</td>
      <td>é«˜æ–‡å¨Ÿ</td>
      <td>å¾®ä¿¡</td>
    </tr>
    <tr>
      <th>3</th>
      <td>æµ™å¤§</td>
      <td>æµ™æ±Ÿå¤§å­¦</td>
      <td>æ–°äºº</td>
      <td>è®°è€…å›¢</td>
      <td>ç¼˜å®š</td>
      <td>æ˜Ÿæ²³</td>
      <td>æ¯æ ¡</td>
      <td>2020</td>
      <td>123</td>
      <td>æå…°å¨Ÿ</td>
    </tr>
    <tr>
      <th>4</th>
      <td>æµå—</td>
      <td>å…¬å®‰</td>
      <td>æŠ¥å‘Š</td>
      <td>åŸæ–‡</td>
      <td>äº¤è­¦</td>
      <td>æ ‡é¢˜</td>
      <td>é˜…è¯»</td>
      <td>nan</td>
      <td>nan</td>
      <td>nan</td>
    </tr>
    <tr>
      <th>5</th>
      <td>å¹´ä¼š</td>
      <td>ç¯ä¿</td>
      <td>æ¹–å—çœ</td>
      <td>ç¤¾ä¼š</td>
      <td>è¡ŒåŠ¨è€…</td>
      <td>2020</td>
      <td>ç”Ÿæ€</td>
      <td>ç»„ç»‡</td>
      <td>ç»¿è‰²</td>
      <td>ç¯å¢ƒæ²»ç†</td>
    </tr>
    <tr>
      <th>6</th>
      <td>æ–©è‚‰</td>
      <td>æµ·å®‰</td>
      <td>ç‚¸åˆ¶</td>
      <td>ç™½æ–©</td>
      <td>ç‚–ç…®</td>
      <td>--</td>
      <td>è‘±å§œ</td>
      <td>çŒ´æ€¥</td>
      <td>éº»è™¾</td>
      <td>é»„æ¯›</td>
    </tr>
    <tr>
      <th>7</th>
      <td>é«˜æ°</td>
      <td>æ‰§æ³•</td>
      <td>å­¦æ³•</td>
      <td>å…¬å®‰</td>
      <td>å…¬å®‰æœºå…³</td>
      <td>å¤šé¢æ‰‹</td>
      <td>å…¨å¸‚</td>
      <td>æ³•æ²»</td>
      <td>å¤è®®</td>
      <td>æ°‘è­¦</td>
    </tr>
    <tr>
      <th>8</th>
      <td>æ —å­</td>
      <td>å¥½é’°</td>
      <td>ç‚’æ —å­</td>
      <td>è™¹å£</td>
      <td>å°è™¹</td>
      <td>æµ·å®è·¯</td>
      <td>å¥½å¥½</td>
      <td>00</td>
      <td>é‡æ —</td>
      <td>æ¿æ —</td>
    </tr>
    <tr>
      <th>9</th>
      <td>æµ·å®‰</td>
      <td>åšç‰©é¦†</td>
      <td>é™¶ç“·</td>
      <td>é¸£è°¢</td>
      <td>åŒ å¿ƒç‹¬è¿</td>
      <td>ç¾è½®ç¾å¥‚</td>
      <td>æ—è£•ç¿”</td>
      <td>é‚°é¢–</td>
      <td>å–œæ¬¢</td>
      <td>å…‰è¾‰ç¿çƒ‚</td>
    </tr>
  </tbody>
</table>
</div>
      <button class="colab-df-convert" onclick="convertToInteractive('df-6e4a2242-7880-4b8a-a492-51e9c31dcf7b')" title="Convert this dataframe to an interactive table." style="display:none;">
        
  &lt;svg xmlns="http://www.w3.org/2000/svg" height="24px"viewBox="0 0 24 24"
       width="24px"&gt;
    <path d="M0 0h24v24H0V0z" fill="none"></path>
    <path d="M18.56 5.44l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94zm-11 1L8.5 8.5l.94-2.06 2.06-.94-2.06-.94L8.5 2.5l-.94 2.06-2.06.94zm10 10l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94z"></path><path d="M17.41 7.96l-1.37-1.37c-.4-.4-.92-.59-1.43-.59-.52 0-1.04.2-1.43.59L10.3 9.45l-7.72 7.72c-.78.78-.78 2.05 0 2.83L4 21.41c.39.39.9.59 1.41.59.51 0 1.02-.2 1.41-.59l7.78-7.78 2.81-2.81c.8-.78.8-2.07 0-2.86zM5.41 20L4 18.59l7.72-7.72 1.47 1.35L5.41 20z"></path>
  &lt;/svg&gt;
      </button>
      
  <style>
    .colab-df-container {
      display:flex;
      flex-wrap:wrap;
      gap: 12px;
    }

    .colab-df-convert {
      background-color: #E8F0FE;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      display: none;
      fill: #1967D2;
      height: 32px;
      padding: 0 0 0 0;
      width: 32px;
    }

    .colab-df-convert:hover {
      background-color: #E2EBFA;
      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);
      fill: #174EA6;
    }

    [theme=dark] .colab-df-convert {
      background-color: #3B4455;
      fill: #D2E3FC;
    }

    [theme=dark] .colab-df-convert:hover {
      background-color: #434B5C;
      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));
      fill: #FFFFFF;
    }
  </style>

      <script>
        const buttonEl =
          document.querySelector('#df-6e4a2242-7880-4b8a-a492-51e9c31dcf7b button.colab-df-convert');
        buttonEl.style.display =
          google.colab.kernel.accessAllowed ? 'block' : 'none';

        async function convertToInteractive(key) {
          const element = document.querySelector('#df-6e4a2242-7880-4b8a-a492-51e9c31dcf7b');
          const dataTable =
            await google.colab.kernel.invokeFunction('convertToInteractive',
                                                     [key], {});
          if (!dataTable) return;

          const docLinkHtml = 'Like what you see? Visit the ' +
            '<a target="_blank" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'
            + ' to learn more about interactive tables.';
          element.innerHTML = '';
          dataTable['output_type'] = 'display_data';
          await google.colab.output.renderOutput(dataTable, element);
          const docLink = document.createElement('div');
          docLink.innerHTML = docLinkHtml;
          element.appendChild(docLink);
        }
      </script>
    </div>
  </div>
  
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We can also put all keywords together in a single column. It is done by applying function <strong>join()</strong> along axis 1 of our DataFrame.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-python"><pre><span></span><span class="n">df_join</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
<span class="n">df_join</span><span class="p">[</span><span class="s2">"keywords"</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">row</span><span class="p">:</span> <span class="s1">','</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">row</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">df_join</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">

  <div id="df-79c1a951-e829-42b1-b84c-c0ebedc2fcc3">
    <div class="colab-df-container">
      <div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>keywords</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>æ‹”èåœ,èåœ,é‡‡æ‘˜,å­©å­,èœå›­,æ”¶è·,å‘¨æœ«ç‰ˆ,å®è·µ,çƒ­çˆ±åŠ³åŠ¨,ç»ˆè§‰</td>
    </tr>
    <tr>
      <th>1</th>
      <td>ç»¿è‰²,å¾ªç¯,æ¹–å—çœ,10,ç¯ä¿,ç”Ÿæ€,æ´»åŠ¨,å…‘æ¢,åƒåœ¾,åˆ†ç±»</td>
    </tr>
    <tr>
      <th>2</th>
      <td>å´é‚®é‚®,ä¸‰è½®è½¦,å­©å­,å°å­™å­,äº‹è¿¹,å½’ä»,2019,12,é«˜æ–‡å¨Ÿ,å¾®ä¿¡</td>
    </tr>
    <tr>
      <th>3</th>
      <td>æµ™å¤§,æµ™æ±Ÿå¤§å­¦,æ–°äºº,è®°è€…å›¢,ç¼˜å®š,æ˜Ÿæ²³,æ¯æ ¡,2020,123,æå…°å¨Ÿ</td>
    </tr>
    <tr>
      <th>4</th>
      <td>æµå—,å…¬å®‰,æŠ¥å‘Š,åŸæ–‡,äº¤è­¦,æ ‡é¢˜,é˜…è¯»,nan,nan,nan</td>
    </tr>
    <tr>
      <th>5</th>
      <td>å¹´ä¼š,ç¯ä¿,æ¹–å—çœ,ç¤¾ä¼š,è¡ŒåŠ¨è€…,2020,ç”Ÿæ€,ç»„ç»‡,ç»¿è‰²,ç¯å¢ƒæ²»ç†</td>
    </tr>
    <tr>
      <th>6</th>
      <td>æ–©è‚‰,æµ·å®‰,ç‚¸åˆ¶,ç™½æ–©,ç‚–ç…®,--,è‘±å§œ,çŒ´æ€¥,éº»è™¾,é»„æ¯›</td>
    </tr>
    <tr>
      <th>7</th>
      <td>é«˜æ°,æ‰§æ³•,å­¦æ³•,å…¬å®‰,å…¬å®‰æœºå…³,å¤šé¢æ‰‹,å…¨å¸‚,æ³•æ²»,å¤è®®,æ°‘è­¦</td>
    </tr>
    <tr>
      <th>8</th>
      <td>æ —å­,å¥½é’°,ç‚’æ —å­,è™¹å£,å°è™¹,æµ·å®è·¯,å¥½å¥½,00,é‡æ —,æ¿æ —</td>
    </tr>
    <tr>
      <th>9</th>
      <td>æµ·å®‰,åšç‰©é¦†,é™¶ç“·,é¸£è°¢,åŒ å¿ƒç‹¬è¿,ç¾è½®ç¾å¥‚,æ—è£•ç¿”,é‚°é¢–,å–œæ¬¢,å…‰è¾‰ç¿çƒ‚</td>
    </tr>
  </tbody>
</table>
</div>
      <button class="colab-df-convert" onclick="convertToInteractive('df-79c1a951-e829-42b1-b84c-c0ebedc2fcc3')" title="Convert this dataframe to an interactive table." style="display:none;">
        
  &lt;svg xmlns="http://www.w3.org/2000/svg" height="24px"viewBox="0 0 24 24"
       width="24px"&gt;
    <path d="M0 0h24v24H0V0z" fill="none"></path>
    <path d="M18.56 5.44l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94zm-11 1L8.5 8.5l.94-2.06 2.06-.94-2.06-.94L8.5 2.5l-.94 2.06-2.06.94zm10 10l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94z"></path><path d="M17.41 7.96l-1.37-1.37c-.4-.4-.92-.59-1.43-.59-.52 0-1.04.2-1.43.59L10.3 9.45l-7.72 7.72c-.78.78-.78 2.05 0 2.83L4 21.41c.39.39.9.59 1.41.59.51 0 1.02-.2 1.41-.59l7.78-7.78 2.81-2.81c.8-.78.8-2.07 0-2.86zM5.41 20L4 18.59l7.72-7.72 1.47 1.35L5.41 20z"></path>
  &lt;/svg&gt;
      </button>
      
  <style>
    .colab-df-container {
      display:flex;
      flex-wrap:wrap;
      gap: 12px;
    }

    .colab-df-convert {
      background-color: #E8F0FE;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      display: none;
      fill: #1967D2;
      height: 32px;
      padding: 0 0 0 0;
      width: 32px;
    }

    .colab-df-convert:hover {
      background-color: #E2EBFA;
      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);
      fill: #174EA6;
    }

    [theme=dark] .colab-df-convert {
      background-color: #3B4455;
      fill: #D2E3FC;
    }

    [theme=dark] .colab-df-convert:hover {
      background-color: #434B5C;
      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));
      fill: #FFFFFF;
    }
  </style>

      <script>
        const buttonEl =
          document.querySelector('#df-79c1a951-e829-42b1-b84c-c0ebedc2fcc3 button.colab-df-convert');
        buttonEl.style.display =
          google.colab.kernel.accessAllowed ? 'block' : 'none';

        async function convertToInteractive(key) {
          const element = document.querySelector('#df-79c1a951-e829-42b1-b84c-c0ebedc2fcc3');
          const dataTable =
            await google.colab.kernel.invokeFunction('convertToInteractive',
                                                     [key], {});
          if (!dataTable) return;

          const docLinkHtml = 'Like what you see? Visit the ' +
            '<a target="_blank" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'
            + ' to learn more about interactive tables.';
          element.innerHTML = '';
          dataTable['output_type'] = 'display_data';
          await google.colab.output.renderOutput(dataTable, element);
          const docLink = document.createElement('div');
          docLink.innerHTML = docLinkHtml;
          element.appendChild(docLink);
        }
      </script>
    </div>
  </div>
  
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>To download the data frame as a csv, we can use <strong>to_csv()</strong> and <strong>files.download()</strong>.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-python"><pre><span></span><span class="kn">from</span> <span class="nn">google.colab</span> <span class="kn">import</span> <span class="n">files</span>

<span class="n">df_join</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">'keywords.csv'</span><span class="p">)</span>
<span class="n">files</span><span class="o">.</span><span class="n">download</span><span class="p">(</span><span class="s1">'keywords.csv'</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="ğŸ‰">
<a class="anchor" href="#%F0%9F%8E%89" aria-hidden="true"><span class="octicon octicon-link"></span></a>ğŸ‰<a class="anchor-link" href="#%F0%9F%8E%89"> </a>
</h1>
<p>Great! Now we have just learnt how to extract keywords from a webpage. This is only the basics to work with a simple webpage. To better understand the potential of BeautifulSoup, I recommand you to further search for BeautifulSoup tutorials on Youtube.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><br>
<br></p>
<hr>
<h2 id="Additional-information">
<a class="anchor" href="#Additional-information" aria-hidden="true"><span class="octicon octicon-link"></span></a><strong>Additional information</strong><a class="anchor-link" href="#Additional-information"> </a>
</h2>
<p>This notebook is provided for educational purpose and feel free to report any issue on GitHub.</p>
<p><br></p>
<p><strong>Author:</strong> Ka Hei, Chow</p>
<p><strong>License:</strong> The code in this notebook is licensed under the <a href="https://creativecommons.org/licenses/by/4.0/">Creative Commons by Attribution 4.0 license</a>.</p>
<p><strong>Last modified:</strong> February 2022</p>

</div>
</div>
</div>
</div>



  </div><!-- from https://github.com/utterance/utterances -->
<script src="https://utteranc.es/client.js"
        repo="pinkychow1010/digital-chinese-history-blog"
        issue-term="title"
        label="blogpost-comment"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script><a class="u-url" href="/digital-chinese-history-blog/level-4/chapter-4/jieba/beautifulsoup/web-scraping/2022/02/07/Chinese_Keyword_Extraction_2.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/digital-chinese-history-blog/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="/digital-chinese-history-blog/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/digital-chinese-history-blog/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
      </div>
      <div class="footer-col">
        <p>This site focuses on Python and aims to support users to conduct academic research in the humanities using open source programming languages.</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"><li><a rel="me" href="https://github.com/pinkychow1010" target="_blank" title="pinkychow1010"><svg class="svg-icon grey"><use xlink:href="/digital-chinese-history-blog/assets/minima-social-icons.svg#github"></use></svg></a></li><li><a rel="me" href="https://twitter.com/chinese_digital" target="_blank" title="chinese_digital"><svg class="svg-icon grey"><use xlink:href="/digital-chinese-history-blog/assets/minima-social-icons.svg#twitter"></use></svg></a></li></ul>
</div>

  </div>

</footer>
</body>

</html>
